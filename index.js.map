{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '54320927-5ca4d41cc3ecb718a2e32b522';\n\nexport async function getImagesByQuery(query, page) {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page: 15,\n        },\n    });\n\n    return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet loaderTimeoutId = null;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      img => `\n      <li class=\"image-wrapper\">\n        <a href=\"${img.largeImageURL}\">\n          <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n        </a>\n\n        <div class=\"stats-panel\">\n          <div class=\"stat\">\n            <span class=\"stat-title\">Likes</span>\n            <span class=\"stat-number\">${img.likes}</span>\n          </div>\n          <div class=\"stat\">\n            <span class=\"stat-title\">Views</span>\n            <span class=\"stat-number\">${img.views}</span>\n          </div>\n          <div class=\"stat\">\n            <span class=\"stat-title\">Comments</span>\n            <span class=\"stat-number\">${img.comments}</span>\n          </div>\n          <div class=\"stat\">\n            <span class=\"stat-title\">Downloads</span>\n            <span class=\"stat-number\">${img.downloads}</span>\n          </div>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoaderWithDelay(delay = 400) {\n  loaderTimeoutId = setTimeout(() => {\n    loader.textContent = 'Loading images, please wait...';\n    loader.classList.remove('hidden');\n  }, delay);\n}\n\nexport function hideLoader() {\n  if (loaderTimeoutId) {\n    clearTimeout(loaderTimeoutId);\n    loaderTimeoutId = null;\n  }\n  loader.classList.add('hidden');\n  loader.textContent = '';\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    showLoaderWithDelay,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', async e => {\n    e.preventDefault();\n\n    query = e.target.elements['search-text'].value.trim();\n    if (!query) return;\n\n    page = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoaderWithDelay();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.error({ message: 'Sorry, no images found.' });\n            return;\n        }\n\n        createGallery(data.hits);\n        showLoadMoreButton();\n    } catch {\n        iziToast.error({ message: 'Error fetching images.' });\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    showLoaderWithDelay();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        createGallery(data.hits);\n\n        const loadedImages = page * 15;\n        if (loadedImages >= totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n        const cardHeight =\n            document.querySelector('.image-wrapper').getBoundingClientRect().height;\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","axios","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","loaderTimeoutId","createGallery","images","markup","img","clearGallery","showLoaderWithDelay","delay","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","totalHits","e","data","iziToast","cardHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAiBC,EAAOC,EAAM,CAahD,OAZiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACb,CACT,CAAK,GAEe,IACpB,CChBA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIC,EAAkB,KAEf,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACCE,GAAO;AAAA;AAAA,mBAEMA,EAAI,aAAa;AAAA,sBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAMhBA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,wCAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,wCAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,wCAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,KAKhD,EACA,KAAK,EAAE,EAEVT,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CL,EAAS,QAAO,CAClB,CAEO,SAASO,GAAe,CAC7BV,EAAQ,UAAY,EACtB,CAEO,SAASW,EAAoBC,EAAQ,IAAK,CAC/CP,EAAkB,WAAW,IAAM,CACjCJ,EAAO,YAAc,iCACrBA,EAAO,UAAU,OAAO,QAAQ,CACjC,EAAEW,CAAK,CACV,CAEO,SAASC,GAAa,CACvBR,IACF,aAAaA,CAAe,EAC5BA,EAAkB,MAEpBJ,EAAO,UAAU,IAAI,QAAQ,EAC7BA,EAAO,YAAc,EACvB,CAEO,SAASa,GAAqB,CACnCZ,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASa,GAAqB,CACnCb,EAAY,UAAU,IAAI,QAAQ,CACpC,CC/DA,MAAMc,EAAO,SAAS,cAAc,OAAO,EACrCd,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIL,EAAQ,GACRC,EAAO,EACPmB,EAAY,EAEhBD,EAAK,iBAAiB,SAAU,MAAME,GAAK,CAIvC,GAHAA,EAAE,eAAc,EAEhBrB,EAAQqB,EAAE,OAAO,SAAS,aAAa,EAAE,MAAM,OAC3C,EAACrB,EAEL,CAAAC,EAAO,EACPY,IACAK,IACAJ,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAMvB,EAAiBC,EAAOC,CAAI,EAG/C,GAFAmB,EAAYE,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CACxBC,EAAS,MAAM,CAAE,QAAS,yBAA2B,CAAA,EACrD,MACH,CAEDd,EAAca,EAAK,IAAI,EACvBL,GACR,MAAY,CACJM,EAAS,MAAM,CAAE,QAAS,wBAA0B,CAAA,CAC5D,QAAc,CACNP,GACH,EACL,CAAC,EAEDX,EAAY,iBAAiB,QAAS,SAAY,CAC9CJ,GAAQ,EACRa,IAEA,GAAI,CACA,MAAMQ,EAAO,MAAMvB,EAAiBC,EAAOC,CAAI,EAC/CQ,EAAca,EAAK,IAAI,EAEFrB,EAAO,IACRmB,IAChBF,IACAK,EAAS,KAAK,CACV,QAAS,4DACzB,CAAa,GAGL,MAAMC,EACF,SAAS,cAAc,gBAAgB,EAAE,sBAAqB,EAAG,OAErE,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,CACT,QAAc,CACNR,GACH,CACL,CAAC"}